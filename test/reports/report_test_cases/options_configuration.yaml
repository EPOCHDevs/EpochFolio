tests:
  - title: "Minimal Configuration - Cards Only"
    input:
      type: "gap_data"
      # Simple dataset for minimal tearsheet
      timestamps: [
        "2022-03-28T09:30:00",
        "2022-03-28T11:00:00",
        "2022-03-28T14:30:00"
      ]
      gap_up: [true, false, true]
      gap_down: [false, true, false]
      fill_fraction: [0.65, 0.78, 0.42]
      gap_size: [0.022, -0.018, 0.015]
      psc: [589.75, 602.74, 591.90]
      c: [602.74, 591.90, 600.78]
      psc_timestamp: [
        "2022-03-25T16:00:00",
        "2022-03-28T10:59:00",
        "2022-03-28T14:29:00"
      ]
    expect:
      type: "tearsheet"
      cards:
        - data:
          - title: "Total Gaps"
            value: 3
          - title: "Gap Up"
            value: 2
          - title: "Gap Down"
            value: 1
          - title: "Overall Fill Rate"
            value: 0.617
    options:
      report_type: "gap_report"
      instance_id: "minimal_config_test"
      # Disable all analysis sections
      show_fill_analysis: false
      show_day_of_week_analysis: false
      show_fill_time_analysis: false
      show_performance_analysis: false
      show_streak_analysis: false
      show_distribution_histogram: false

  - title: "Charts Only Configuration"
    input:
      type: "gap_data"
      timestamps: [
        "2022-03-29T09:30:00",
        "2022-03-29T10:45:00",
        "2022-03-29T12:15:00",
        "2022-03-29T15:00:00",
        "2022-03-30T09:30:00"
      ]
      gap_up: [true, false, true, false, true]
      gap_down: [false, true, false, true, false]
      fill_fraction: [0.55, 0.82, 0.38, 0.75, 0.28]
      gap_size: [0.028, -0.015, 0.032, -0.025, 0.019]
      psc: [600.78, 617.60, 608.35, 628.11, 612.42]
      c: [617.60, 608.35, 628.11, 612.42, 624.05]
      psc_timestamp: [
        "2022-03-28T16:00:00",
        "2022-03-29T10:44:00",
        "2022-03-29T12:14:00",
        "2022-03-29T14:59:00",
        "2022-03-29T16:00:00"
      ]
    expect:
      type: "tearsheet"
      cards:
        - data:
          - title: "Total Gaps"
            value: 5
          - title: "Gap Up"
            value: 3
          - title: "Gap Down"
            value: 2
          - title: "Overall Fill Rate"
            value: 0.556
    options:
      report_type: "gap_report"
      instance_id: "charts_only_test"
      # Enable only chart analyses
      show_fill_analysis: true
      show_streak_analysis: true
      show_distribution_histogram: true
      show_day_of_week_analysis: false
      show_fill_time_analysis: false
      show_performance_analysis: false
      histogram_bins: 15
      max_streaks: 4

  - title: "Tables Only Configuration"
    input:
      type: "gap_data"
      timestamps: [
        "2022-03-31T09:30:00",
        "2022-03-31T11:30:00",
        "2022-03-31T13:45:00",
        "2022-04-01T09:30:00",
        "2022-04-01T14:15:00",
        "2022-04-04T09:30:00",
        "2022-04-04T12:00:00"
      ]
      gap_up: [true, false, true, false, true, false, true]
      gap_down: [false, true, false, true, false, true, false]
      fill_fraction: [0.45, 0.88, 0.62, 0.73, 0.35, 0.91, 0.58]
      gap_size: [0.025, -0.020, 0.018, -0.027, 0.033, -0.016, 0.021]
      psc: [624.05, 639.61, 627.81, 639.10, 622.36, 642.89, 632.60]
      c: [639.61, 627.81, 639.10, 622.36, 642.89, 632.60, 645.89]
      psc_timestamp: [
        "2022-03-30T16:00:00",
        "2022-03-31T11:29:00",
        "2022-03-31T13:44:00",
        "2022-03-31T16:00:00",
        "2022-04-01T14:14:00",
        "2022-04-01T16:00:00",
        "2022-04-04T11:59:00"
      ]
    expect:
      type: "tearsheet"
      cards:
        - data:
          - title: "Total Gaps"
            value: 7
          - title: "Gap Up"
            value: 4
          - title: "Gap Down"
            value: 3
          - title: "Overall Fill Rate"
            value: 0.646
    options:
      report_type: "gap_report"
      instance_id: "tables_only_test"
      # Enable only table analyses
      show_fill_analysis: false
      show_streak_analysis: false
      show_distribution_histogram: false
      show_day_of_week_analysis: true
      show_fill_time_analysis: true
      show_performance_analysis: true
      max_table_rows: 25

  - title: "Custom Parameters Configuration"
    input:
      type: "gap_data"
      timestamps: [
        "2022-04-05T09:30:00",
        "2022-04-05T10:15:00",
        "2022-04-05T11:45:00",
        "2022-04-05T13:30:00",
        "2022-04-05T15:15:00",
        "2022-04-06T09:30:00",
        "2022-04-06T11:00:00",
        "2022-04-06T14:45:00",
        "2022-04-07T09:30:00",
        "2022-04-07T12:30:00"
      ]
      gap_up: [true, false, true, false, true, false, true, false, true, false]
      gap_down: [false, true, false, true, false, true, false, true, false, true]
      fill_fraction: [0.22, 0.85, 0.48, 0.76, 0.31, 0.89, 0.54, 0.67, 0.18, 0.92]
      gap_size: [0.038, -0.024, 0.029, -0.021, 0.042, -0.017, 0.026, -0.033, 0.045, -0.019]
      psc: [645.89, 670.43, 654.34, 673.30, 659.16, 682.85, 671.23, 687.68, 664.98, 677.92]
      c: [670.43, 654.34, 673.30, 659.16, 682.85, 671.23, 687.68, 664.98, 677.92, 665.06]
      psc_timestamp: [
        "2022-04-04T16:00:00",
        "2022-04-05T10:14:00",
        "2022-04-05T11:44:00",
        "2022-04-05T13:29:00",
        "2022-04-05T15:14:00",
        "2022-04-05T16:00:00",
        "2022-04-06T10:59:00",
        "2022-04-06T14:44:00",
        "2022-04-06T16:00:00",
        "2022-04-07T12:29:00"
      ]
    expect:
      type: "tearsheet"
      cards:
        - data:
          - title: "Total Gaps"
            value: 10
          - title: "Gap Up"
            value: 5
          - title: "Gap Down"
            value: 5
          - title: "Overall Fill Rate"
            value: 0.582
    options:
      report_type: "gap_report"
      instance_id: "custom_params_test"
      # Enable all with custom parameters
      show_fill_analysis: true
      show_day_of_week_analysis: true
      show_fill_time_analysis: true
      show_performance_analysis: true
      show_streak_analysis: true
      show_distribution_histogram: true
      histogram_bins: 25
      max_table_rows: 100
      max_streaks: 8

  - title: "Large Dataset Configuration"
    input:
      type: "gap_data"
      # Larger dataset to test performance with more data points
      timestamps: [
        "2022-04-08T09:30:00", "2022-04-08T10:00:00", "2022-04-08T11:15:00", "2022-04-08T13:00:00", "2022-04-08T15:30:00",
        "2022-04-11T09:30:00", "2022-04-11T10:45:00", "2022-04-11T12:30:00", "2022-04-11T14:15:00", "2022-04-11T16:00:00",
        "2022-04-12T09:30:00", "2022-04-12T11:00:00", "2022-04-12T13:45:00", "2022-04-12T15:00:00", "2022-04-13T09:30:00"
      ]
      gap_up: [true, false, true, false, true, false, true, false, true, false, true, false, true, false, true]
      gap_down: [false, true, false, true, false, true, false, true, false, true, false, true, false, true, false]
      fill_fraction: [0.65, 0.82, 0.38, 0.91, 0.24, 0.77, 0.53, 0.86, 0.41, 0.69, 0.28, 0.94, 0.57, 0.73, 0.35]
      gap_size: [0.025, -0.018, 0.032, -0.014, 0.041, -0.027, 0.019, -0.023, 0.036, -0.016, 0.029, -0.021, 0.033, -0.026, 0.028]
      psc: [
        665.06, 681.69, 669.42, 691.84, 682.16, 699.13, 680.25, 693.17, 677.21, 701.59, 683.74, 703.48, 687.92, 710.59, 692.15
      ]
      c: [
        681.69, 669.42, 691.84, 682.16, 699.13, 680.25, 693.17, 677.21, 701.59, 683.74, 703.48, 687.92, 710.59, 692.15, 711.52
      ]
      psc_timestamp: [
        "2022-04-07T16:00:00", "2022-04-08T09:59:00", "2022-04-08T11:14:00", "2022-04-08T12:59:00", "2022-04-08T15:29:00",
        "2022-04-08T16:00:00", "2022-04-11T10:44:00", "2022-04-11T12:29:00", "2022-04-11T14:14:00", "2022-04-11T15:59:00",
        "2022-04-11T16:00:00", "2022-04-12T10:59:00", "2022-04-12T13:44:00", "2022-04-12T14:59:00", "2022-04-12T16:00:00"
      ]
    expect:
      type: "tearsheet"
      cards:
        - data:
          - title: "Total Gaps"
            value: 15
          - title: "Gap Up"
            value: 8
          - title: "Gap Down"
            value: 7
          - title: "Overall Fill Rate"
            value: 0.595
    options:
      report_type: "gap_report"
      instance_id: "large_dataset_test"
      # Enable all analyses for comprehensive large dataset testing
      show_fill_analysis: true
      show_day_of_week_analysis: true
      show_fill_time_analysis: true
      show_performance_analysis: true
      show_streak_analysis: true
      show_distribution_histogram: true
      histogram_bins: 20
      max_table_rows: 75
      max_streaks: 6